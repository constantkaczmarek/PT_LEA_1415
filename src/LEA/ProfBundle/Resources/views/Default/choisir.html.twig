{% extends "::base.html.twig" %}

{% block body %}

    {% javascripts '@LEAProfBundle/Resources/Js/choisir.js' %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}

    {% include "LEAProfBundle:Default:navbar.html.twig" %}

    <div>
        <span>Choisissez la formation : </span>

        <form action="{{  path('lea_prof_changeForm',{'name':name}) }}" method="post">
            <select id="formation" name="formation" >
                {% for forma in listForm.keys %}
                    {% if forma==formation %}
                        <option value="{{ forma }}" selected="selected">{{ listForm.values[loop.index-1] }}</option>
                    {% else %}
                        <option value="{{ forma }}">{{ listForm.values[loop.index-1] }}</option>
                    {% endif %}
                {% endfor %}
            </select>
            <input type="submit" name="changeFormation" value="Changer Formation"/>
        </form>
    </div>
    <br/>


    {{ form_start(form) }}

        {{ form_errors(form) }}

        <input type="submit" name="Enregistrer" value="Transmettre vos choix" class="btn btn-primary"/>
        <br/>
        <br/>

        <table class="table table-striped">
                <tr>
                <th>#</th>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Formation</th>
                <th>Ville</th>
                <th>Entreprise</th>
                <th>Tuteurs(potentiels)</th>
                <th>Détails</th>
            </tr>

        {% if listEtu %}
            {% for etu in listEtu %}
                <tr>
                    <td>{{ form_row(form.altCle[loop.index-1]) }}</td>
                    <td>{{ etu.nom_etud }}</td>
                    <td>{{ etu.nom_prenom }}</td>
                    <td>{{ etu.formation }}</td>
                    <td>{{ etu.ville }}</td>
                    <td>{{ etu.entreprise }}</td>
                    <td>{{ etu.tuteurs.tuteurRef }}</td>
                    <td onclick="showModal({{ etu.alternanceCle }})"><a href="#">Détails</a></td>
                    <td id= "{{ etu.alternanceCle }}" style="visibility: hidden" >
                        <table class="table table-default">
                            <tr><td>Etudiant </td> <td> {{ etu.nom_etud }}</td></tr>
                            <tr><td>Referent</td> <td> {{ etu.referent }}</td></tr>
                            <tr><td>Missions</td><td> {{ etu.mission }}</td></tr>
                            <tr><td>Services</td><td> {{ etu.service }}</td></tr>
                            <tr><td>Envirnmnt Tech.</td><td> {{ etu.tech }}</td></tr>
                            <tr><td><a onclick="hideModal({{ etu.alternanceCle }})">Cacher </a></td><td></td></tr>
                        </table>
                    </td>
                </tr>
            {% endfor %}
        </table>

        {% endif %}

    {{ form_end(form) }}

{% endblock %}